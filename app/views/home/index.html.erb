<body>
<div id="video-overlay">
  <video id="loader" class="vhs-noise-video" autoplay muted playsinline>
    <source src="<%= asset_path('VHS Web_ntsc-HS.mp4') %>" type="video/mp4">
    Your browser does not support the video tag.
  </video>
</div>

<div class="paper-texture"></div>
<div class="noise-texture"></div>
<div class="grain-texture"></div>






<!-- VHS Background Noise GIF Overlay (ONLY on Home Page) -->
<div class="vhs-noise-overlay"></div>

<div class="scroll-wrapper" data-controller="scroll-animation">

  <section class="scroll-selection-nav">
    <%= render "shared/navbar" %>
  </section>

  <section class="scroll-selection">
    <div class="kassi-container" data-controller="kassi-scroll">
      <%= image_tag "kassi.png", alt: "Kassi Image", class: "kassi-image" %>
    </div>


    <div class="backdrop-title" data-controller="kassi-scroll">
      <h1 class="title-aron">ARON</h1>
      <h1 class="title-hannes">HANNES</h1>
    </div>
  </section>


  <%# <section class="scroll-selection" >
  <div style="background-color: red; height: 100vh;">
    </div>
  </section> %>

  <section class="scroll-selection" id="about">
  <div class="about-row">
    <%= image_tag "Portrait 1.png", alt: "About Image", class: "about-image" %>
    <div class="about-text">
      <h3>ABouT</h3>
      <div class="upper-text">
        <p>Aron Hannes is an Icelandic artist and songwriter crafting a unique blend of Alt-Soul and Indie R&B. With deep roots in storytelling, he merges raw emotion with dynamic melodies, creating music that feels both intimate and expansive. Drawing inspiration from R&B, soul, pop, and gospel, his sound is ever-evolving‚Äîpushing boundaries while staying true to his artistic vision. Known for his versatility and passion for honest, genre-blurring music, Aron brings a distinct voice to the alternative R&B scene. Whether writing for himself or collaborating with others, his dedication to growth and authenticity continues to shape his journey as an artist.</p>
      </div>
    </div>
  </div>
</section>

<div class="scroll-selection" id="fullpage">
  <section class="fullpage-section threejs-section" data-gsap-scroll-target="section">
    <div id="three-container" data-controller="three"></div>
  </section>
</div>

<section class="scroll-selection" id="music-platforms" data-gsap-scroll-target="section">
    <ul class="music-list">
      <li>
        <a href="https://open.spotify.com/artist/3YWoe6haPoiQdq7GaQz2OR?si=eaM94hB-SkGdMmlK50nF4A" target="_blank">
          <%= image_tag "Spotify.svg", alt: "Spotify" %>
          SPOTIFY
        </a>
      </li>
      <li>
        <a href="https://music.apple.com/is/artist/aron-hannes/820717161" target="_blank">
          <%= image_tag "applemusic.svg", alt: "Apple Music" %>
          APPLE MUSIC
        </a>
      </li>
      <li>
        <a href="https://deezer.page.link/XSZdQHGWG5SsZhzE7" target="_blank">
          <%= image_tag "deezer.svg", alt: "Deezer" %>
          DEEZER
        </a>
      </li>
      <li>
        <a href="https://music.youtube.com/channel/UCG5wQ2UMfLYD5lp8MAbk6Zg?si=Se8nOTEe2Vvr014o" target="_blank">
          <%= image_tag "youtube-music.svg", alt: "YouTube Music" %>
          YOUTUBE MUSIC
        </a>
      </li>
      <li>
        <a href="https://tidal.com/browse/artist/7421898" target="_blank">
          <%= image_tag "tidal.svg", alt: "Tidal" %>
          TIDAL
        </a>
      </li>
    </ul>
  </section>



  <section class="scroll-selection-footer">
<%= render "shared/footer" %>
</section>

</div>
</body>


<script>

document.addEventListener("turbo:load", () => {
  console.log("üöÄ Turbo Load Event Fired!");

  const video = document.getElementById("loader");
  const videoOverlay = document.getElementById("video-overlay");

  if (!video || !videoOverlay) {
    console.warn("‚ö†Ô∏è No video or overlay found! Exiting script...");
    return;
  }

  // Check if the video has already played in this session
  if (sessionStorage.getItem("vhsPlayed") === "true") {
    console.log("‚úÖ Video already played before. Removing overlay...");
    videoOverlay.remove();
    document.body.style.overflowY = ""; // Restore scrolling
    return;
  }

  // Ensure the video is muted and attempt to play
  video. muted = true; // Required for autoplay
  video.setAttribute("playsinline", ""); // Helps autoplay on iOS

  video.play().catch((error) => {
    console.warn("‚ö†Ô∏è Autoplay failed. Retrying with muted video...", error);
    video.muted = true; // Ensure mute is enforced
    video.play();
  });

  // When the video ends, fade out and remove the overlay
  video.addEventListener("ended", () => {
    videoOverlay.style.transition = "opacity 1s ease-out";
    videoOverlay.style.opacity = "0";

    setTimeout(() => {
      if (videoOverlay) {
        videoOverlay.remove();
      }
      document.body.style.overflowY = ""; // Restore scrolling
      sessionStorage.setItem("vhsPlayed", "true"); // Mark as played
    }, 1000); // Wait for fade-out animation
  });

  // Disable scrolling while the video is playing
  document.body.style.overflowY = "hidden";
});

// Ensure the script also runs on Turbo cache restored pages
document.addEventListener("turbo:render", () => {
  console.log("‚ôªÔ∏è Turbo Render Event Fired!");
});




</script>
